CREATE DATABASE ESTACIONAMENTO;
USE  ESTACIONAMENTO;
CREATE TABLE FUNCIONARIO(
	NOME CHAR(20) NOT NULL,
    SENHA INT(10) NOT NULL
    );
    INSERT INTO FUNCIONARIO(NOME,SENHA) VALUES("root",1);
    SELECT * FROM FUNCIONARIO;
    
/* CRIANDO A TABELA DO CLIENTE */
CREATE TABLE CLIENTE(
	ID_CLIENTE INT AUTO_INCREMENT PRIMARY KEY,
	NOME CHAR(25) NOT NULL,    
    CPF CHAR(25) NOT NULL,
    TELEFONE CHAR(15) NOT NULL,
    CIDADE CHAR(20) NOT NULL,
    DATACADASTRO DATE 
    );
    
/*CRIANDO A TABELA DOS CARROS */
CREATE TABLE VEICULOS(
	ID_VEICULO INT AUTO_INCREMENT PRIMARY KEY,
    ID_CLIENTE INT,
    PLACA CHAR(10) NOT NULL,
    MARCA CHAR(20) NOT NULL,
    MODELO CHAR(20) NOT NULL,
    COR CHAR(10) NOT NULL,
    CONSTRAINT FK_CLIENTE
		FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE)
        ON DELETE CASCADE
        );
    
    
    SELECT * FROM CLIENTE ;
    SELECT * FROM FUNCIONARIO;
     SELECT * FROM VEICULOS;
    INSERT INTO CLIENTE (nome, cpf, telefone, cidade)
VALUES ('João', '123.456.789-00', '(11)91234-5678', 'São Paulo');

    
/* TRIGGER PARA SEMPRE ADICIONAR A DATA ASIIM QUE CRIAR O CADASTRO DO CLIENTE*/
DELIMITER $$

CREATE TRIGGER before_insert_cliente
BEFORE INSERT ON CLIENTE
FOR EACH ROW
BEGIN
    SET NEW.DATACADASTRO = CURDATE();
END$$

DELIMITER ;

SHOW CREATE TABLE CLIENTE;
TRUNCATE TABLE CLIENTE;
SHOW TRIGGERS;

SELECT 
    VEICULOS.ID_VEICULO,
    VEICULOS.PLACA,
    VEICULOS.MARCA,
    VEICULOS.MODELO,
    VEICULOS.COR,
    CLIENTE.NOME AS DONO
FROM 
    VEICULOS
INNER JOIN 
    CLIENTE ON VEICULOS.ID_CLIENTE = CLIENTE.ID_CLIENTE;



    
